<svg viewBox="0 0 1800 2400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000"/>
    </marker>
  </defs>
  
  <!-- Title Block -->
  <rect x="50" y="20" width="1700" height="80" fill="#fff" stroke="#000" stroke-width="3"/>
  <text x="900" y="55" font-size="28" font-weight="bold" text-anchor="middle">SOLAR TRACKER SYSTEM - COMPLETE WIRING DIAGRAM</text>
  <text x="900" y="85" font-size="14" text-anchor="middle">All Pin-to-Pin Connections Shown</text>
  
  <!-- ============= ARDUINO UNO ============= -->
  <g id="arduino">
    <rect x="200" y="150" width="280" height="650" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="340" y="180" font-size="20" font-weight="bold" text-anchor="middle">ARDUINO UNO</text>
    
    <!-- Left side - Analog pins -->
    <line x1="200" y1="210" x2="480" y2="210" stroke="#000" stroke-width="1"/>
    
    <!-- A0 -->
    <circle cx="190" cy="240" r="5" fill="#000"/>
    <text x="175" y="245" font-size="12" text-anchor="end" font-weight="bold">A0</text>
    <line x1="190" y1="240" x2="220" y2="240" stroke="#000" stroke-width="2"/>
    
    <!-- A1 -->
    <circle cx="190" cy="280" r="5" fill="#000"/>
    <text x="175" y="285" font-size="12" text-anchor="end" font-weight="bold">A1</text>
    <line x1="190" y1="280" x2="220" y2="280" stroke="#000" stroke-width="2"/>
    
    <!-- A2 -->
    <circle cx="190" cy="320" r="5" fill="#000"/>
    <text x="175" y="325" font-size="12" text-anchor="end" font-weight="bold">A2</text>
    <line x1="190" y1="320" x2="220" y2="320" stroke="#000" stroke-width="2"/>
    
    <!-- A3 -->
    <circle cx="190" cy="360" r="5" fill="#000"/>
    <text x="175" y="365" font-size="12" text-anchor="end" font-weight="bold">A3</text>
    <line x1="190" y1="360" x2="220" y2="360" stroke="#000" stroke-width="2"/>
    
    <!-- A4/SDA -->
    <circle cx="190" cy="400" r="5" fill="#000"/>
    <text x="175" y="405" font-size="12" text-anchor="end" font-weight="bold">A4</text>
    <text x="220" y="405" font-size="10">(SDA)</text>
    <line x1="190" y1="400" x2="220" y2="400" stroke="#000" stroke-width="2"/>
    
    <!-- A5/SCL -->
    <circle cx="190" cy="440" r="5" fill="#000"/>
    <text x="175" y="445" font-size="12" text-anchor="end" font-weight="bold">A5</text>
    <text x="220" y="445" font-size="10">(SCL)</text>
    <line x1="190" y1="440" x2="220" y2="440" stroke="#000" stroke-width="2"/>
    
    <!-- Right side - Digital pins -->
    <line x1="200" y1="490" x2="480" y2="490" stroke="#000" stroke-width="1"/>
    
    <!-- D2 -->
    <circle cx="490" cy="520" r="5" fill="#000"/>
    <text x="505" y="525" font-size="12" font-weight="bold">D2</text>
    <text x="530" y="525" font-size="10">(TX)</text>
    <line x1="460" y1="520" x2="490" y2="520" stroke="#000" stroke-width="2"/>
    
    <!-- D3 -->
    <circle cx="490" cy="560" r="5" fill="#000"/>
    <text x="505" y="565" font-size="12" font-weight="bold">D3</text>
    <text x="530" y="565" font-size="10">(RX)</text>
    <line x1="460" y1="560" x2="490" y2="560" stroke="#000" stroke-width="2"/>
    
    <!-- D6 -->
    <circle cx="490" cy="600" r="5" fill="#000"/>
    <text x="505" y="605" font-size="12" font-weight="bold">D6</text>
    <line x1="460" y1="600" x2="490" y2="600" stroke="#000" stroke-width="2"/>
    
    <!-- D7 -->
    <circle cx="490" cy="640" r="5" fill="#000"/>
    <text x="505" y="645" font-size="12" font-weight="bold">D7</text>
    <line x1="460" y1="640" x2="490" y2="640" stroke="#000" stroke-width="2"/>
    
    <!-- D9 -->
    <circle cx="490" cy="680" r="5" fill="#000"/>
    <text x="505" y="685" font-size="12" font-weight="bold">D9</text>
    <line x1="460" y1="680" x2="490" y2="680" stroke="#000" stroke-width="2"/>
    
    <!-- D10 -->
    <circle cx="490" cy="720" r="5" fill="#000"/>
    <text x="505" y="725" font-size="12" font-weight="bold">D10</text>
    <line x1="460" y1="720" x2="490" y2="720" stroke="#000" stroke-width="2"/>
    
    <!-- Bottom - Power pins -->
    <line x1="200" y1="760" x2="480" y2="760" stroke="#000" stroke-width="1"/>
    
    <!-- 5V -->
    <circle cx="280" cy="810" r="5" fill="#000"/>
    <text x="280" y="835" font-size="12" font-weight="bold" text-anchor="middle">5V</text>
    <line x1="280" y1="790" x2="280" y2="810" stroke="#000" stroke-width="3"/>
    
    <!-- GND -->
    <circle cx="340" cy="810" r="5" fill="#000"/>
    <text x="340" y="835" font-size="12" font-weight="bold" text-anchor="middle">GND</text>
    <line x1="340" y1="790" x2="340" y2="810" stroke="#000" stroke-width="3"/>
    
    <!-- GND -->
    <circle cx="400" cy="810" r="5" fill="#000"/>
    <text x="400" y="835" font-size="12" font-weight="bold" text-anchor="middle">GND</text>
    <line x1="400" y1="790" x2="400" y2="810" stroke="#000" stroke-width="3"/>
  </g>
  
  <!-- ============= LDR CIRCUITS ============= -->
  <g id="ldr-section">
    <rect x="600" y="150" width="480" height="400" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="840" y="180" font-size="18" font-weight="bold" text-anchor="middle">LDR SENSOR ARRAY</text>
    
    <!-- LDR 1 -->
    <g transform="translate(650, 220)">
      <text x="40" y="-5" font-size="12" font-weight="bold" text-anchor="middle">LDR 1</text>
      <circle cx="20" cy="20" r="3" fill="#000"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="45" r="12" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="8" y1="33" x2="2" y2="27" stroke="#000" stroke-width="1.5"/>
      <line x1="12" y1="29" x2="6" y2="23" stroke="#000" stroke-width="1.5"/>
      <line x1="20" y1="57" x2="20" y2="70" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="75" r="3" fill="#000"/>
      <line x1="20" y1="75" x2="20" y2="85" stroke="#000" stroke-width="2"/>
      <rect x="12" y="85" width="16" height="25" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="15" y1="92" x2="25" y2="92" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="98" x2="25" y2="98" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="104" x2="25" y2="104" stroke="#000" stroke-width="1"/>
      <text x="40" y="100" font-size="9">10kΩ</text>
      <line x1="20" y1="110" x2="20" y2="120" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="125" r="3" fill="#000"/>
    </g>
    
    <!-- LDR 2 -->
    <g transform="translate(780, 220)">
      <text x="40" y="-5" font-size="12" font-weight="bold" text-anchor="middle">LDR 2</text>
      <circle cx="20" cy="20" r="3" fill="#000"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="45" r="12" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="8" y1="33" x2="2" y2="27" stroke="#000" stroke-width="1.5"/>
      <line x1="12" y1="29" x2="6" y2="23" stroke="#000" stroke-width="1.5"/>
      <line x1="20" y1="57" x2="20" y2="70" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="75" r="3" fill="#000"/>
      <line x1="20" y1="75" x2="20" y2="85" stroke="#000" stroke-width="2"/>
      <rect x="12" y="85" width="16" height="25" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="15" y1="92" x2="25" y2="92" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="98" x2="25" y2="98" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="104" x2="25" y2="104" stroke="#000" stroke-width="1"/>
      <text x="40" y="100" font-size="9">10kΩ</text>
      <line x1="20" y1="110" x2="20" y2="120" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="125" r="3" fill="#000"/>
    </g>
    
    <!-- LDR 3 -->
    <g transform="translate(910, 220)">
      <text x="40" y="-5" font-size="12" font-weight="bold" text-anchor="middle">LDR 3</text>
      <circle cx="20" cy="20" r="3" fill="#000"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="45" r="12" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="8" y1="33" x2="2" y2="27" stroke="#000" stroke-width="1.5"/>
      <line x1="12" y1="29" x2="6" y2="23" stroke="#000" stroke-width="1.5"/>
      <line x1="20" y1="57" x2="20" y2="70" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="75" r="3" fill="#000"/>
      <line x1="20" y1="75" x2="20" y2="85" stroke="#000" stroke-width="2"/>
      <rect x="12" y="85" width="16" height="25" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="15" y1="92" x2="25" y2="92" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="98" x2="25" y2="98" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="104" x2="25" y2="104" stroke="#000" stroke-width="1"/>
      <text x="40" y="100" font-size="9">10kΩ</text>
      <line x1="20" y1="110" x2="20" y2="120" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="125" r="3" fill="#000"/>
    </g>
    
    <!-- LDR 4 -->
    <g transform="translate(1010, 220)">
      <text x="40" y="-5" font-size="12" font-weight="bold" text-anchor="middle">LDR 4</text>
      <circle cx="20" cy="20" r="3" fill="#000"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="45" r="12" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="8" y1="33" x2="2" y2="27" stroke="#000" stroke-width="1.5"/>
      <line x1="12" y1="29" x2="6" y2="23" stroke="#000" stroke-width="1.5"/>
      <line x1="20" y1="57" x2="20" y2="70" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="75" r="3" fill="#000"/>
      <line x1="20" y1="75" x2="20" y2="85" stroke="#000" stroke-width="2"/>
      <rect x="12" y="85" width="16" height="25" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="15" y1="92" x2="25" y2="92" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="98" x2="25" y2="98" stroke="#000" stroke-width="1"/>
      <line x1="15" y1="104" x2="25" y2="104" stroke="#000" stroke-width="1"/>
      <text x="40" y="100" font-size="9">10kΩ</text>
      <line x1="20" y1="110" x2="20" y2="120" stroke="#000" stroke-width="2"/>
      <circle cx="20" cy="125" r="3" fill="#000"/>
    </g>
    
    <!-- Power bus lines -->
    <line x1="670" y1="240" x2="1030" y2="240" stroke="#000" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="850" y="235" font-size="10" text-anchor="middle">5V Bus</text>
    
    <line x1="670" y1="345" x2="1030" y2="345" stroke="#000" stroke-width="2"/>
    <text x="850" y="365" font-size="10" text-anchor="middle">GND Bus</text>
    
    <!-- LDR signal outputs -->
    <line x1="670" y1="295" x2="670" y2="380" stroke="#000" stroke-width="2"/>
    <circle cx="670" cy="380" r="4" fill="#000"/>
    <text x="685" y="383" font-size="10">To A0</text>
    
    <line x1="800" y1="295" x2="800" y2="400" stroke="#000" stroke-width="2"/>
    <circle cx="800" cy="400" r="4" fill="#000"/>
    <text x="815" y="403" font-size="10">To A1</text>
    
    <line x1="930" y1="295" x2="930" y2="420" stroke="#000" stroke-width="2"/>
    <circle cx="930" cy="420" r="4" fill="#000"/>
    <text x="945" y="423" font-size="10">To A2</text>
    
    <line x1="1030" y1="295" x2="1030" y2="440" stroke="#000" stroke-width="2"/>
    <circle cx="1030" cy="440" r="4" fill="#000"/>
    <text x="1045" y="443" font-size="10">To A3</text>
  </g>
  
  <!-- Connections: LDRs to Arduino -->
  <line x1="670" y1="380" x2="670" y2="240" stroke="#000" stroke-width="1.5"/>
  <line x1="670" y1="240" x2="190" y2="240" stroke="#000" stroke-width="1.5"/>
  
  <line x1="800" y1="400" x2="800" y2="280" stroke="#000" stroke-width="1.5"/>
  <line x1="800" y1="280" x2="190" y2="280" stroke="#000" stroke-width="1.5"/>
  
  <line x1="930" y1="420" x2="930" y2="320" stroke="#000" stroke-width="1.5"/>
  <line x1="930" y1="320" x2="190" y2="320" stroke="#000" stroke-width="1.5"/>
  
  <line x1="1030" y1="440" x2="1030" y2="360" stroke="#000" stroke-width="1.5"/>
  <line x1="1030" y1="360" x2="190" y2="360" stroke="#000" stroke-width="1.5"/>
  
  <!-- LDR 5V connection -->
  <line x1="670" y1="240" x2="560" y2="240" stroke="#000" stroke-width="2"/>
  <line x1="560" y1="240" x2="560" y2="850" stroke="#000" stroke-width="2"/>
  <line x1="560" y1="850" x2="280" y2="850" stroke="#000" stroke-width="2"/>
  <line x1="280" y1="850" x2="280" y2="815" stroke="#000" stroke-width="2"/>
  
  <!-- LDR GND connection -->
  <line x1="670" y1="345" x2="540" y2="345" stroke="#000" stroke-width="2"/>
  <line x1="540" y1="345" x2="540" y2="870" stroke="#000" stroke-width="2"/>
  <line x1="540" y1="870" x2="340" y2="870" stroke="#000" stroke-width="2"/>
  <line x1="340" y1="870" x2="340" y2="815" stroke="#000" stroke-width="2"/>
  
  <!-- ============= INA219 SENSOR ============= -->
  <g id="ina219">
    <rect x="1200" y="150" width="250" height="200" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="1325" y="180" font-size="18" font-weight="bold" text-anchor="middle">INA219</text>
    
    <line x1="1210" y1="195" x2="1440" y2="195" stroke="#000" stroke-width="1"/>
    
    <circle cx="1210" cy="220" r="4" fill="#000"/>
    <text x="1225" y="223" font-size="11" font-weight="bold">VCC</text>
    <line x1="1200" y1="220" x2="1210" y2="220" stroke="#000" stroke-width="2"/>
    
    <circle cx="1210" cy="250" r="4" fill="#000"/>
    <text x="1225" y="253" font-size="11" font-weight="bold">GND</text>
    <line x1="1200" y1="250" x2="1210" y2="250" stroke="#000" stroke-width="2"/>
    
    <circle cx="1210" cy="280" r="4" fill="#000"/>
    <text x="1225" y="283" font-size="11" font-weight="bold">SDA</text>
    <line x1="1200" y1="280" x2="1210" y2="280" stroke="#000" stroke-width="2"/>
    
    <circle cx="1210" cy="310" r="4" fill="#000"/>
    <text x="1225" y="313" font-size="11" font-weight="bold">SCL</text>
    <line x1="1200" y1="310" x2="1210" y2="310" stroke="#000" stroke-width="2"/>
    
    <circle cx="1440" cy="250" r="4" fill="#000"/>
    <text x="1405" y="253" font-size="11" font-weight="bold" text-anchor="end">VIN+</text>
    <line x1="1440" y1="250" x2="1450" y2="250" stroke="#000" stroke-width="2"/>
    
    <circle cx="1440" cy="290" r="4" fill="#000"/>
    <text x="1405" y="293" font-size="11" font-weight="bold" text-anchor="end">VIN-</text>
    <line x1="1440" y1="290" x2="1450" y2="290" stroke="#000" stroke-width="2"/>
  </g>
  
  <!-- INA219 to Arduino connections -->
  <line x1="1200" y1="220" x2="1150" y2="220" stroke="#000" stroke-width="1.5"/>
  <line x1="1150" y1="220" x2="1150" y2="900" stroke="#000" stroke-width="1.5"/>
  <line x1="1150" y1="900" x2="280" y2="900" stroke="#000" stroke-width="1.5"/>
  <line x1="280" y1="900" x2="280" y2="815" stroke="#000" stroke-width="1.5"/>
  
  <line x1="1200" y1="250" x2="1130" y2="250" stroke="#000" stroke-width="1.5"/>
  <line x1="1130" y1="250" x2="1130" y2="920" stroke="#000" stroke-width="1.5"/>
  <line x1="1130" y1="920" x2="400" y2="920" stroke="#000" stroke-width="1.5"/>
  <line x1="400" y1="920" x2="400" y2="815" stroke="#000" stroke-width="1.5"/>
  
  <line x1="1200" y1="280" x2="1110" y2="280" stroke="#000" stroke-width="1.5"/>
  <line x1="1110" y1="280" x2="1110" y2="400" stroke="#000" stroke-width="1.5"/>
  <line x1="1110" y1="400" x2="190" y2="400" stroke="#000" stroke-width="1.5"/>
  
  <line x1="1200" y1="310" x2="1090" y2="310" stroke="#000" stroke-width="1.5"/>
  <line x1="1090" y1="310" x2="1090" y2="440" stroke="#000" stroke-width="1.5"/>
  <line x1="1090" y1="440" x2="190" y2="440" stroke="#000" stroke-width="1.5"/>
  
  <!-- ============= SERVO SYSTEM ============= -->
  <g id="servo-system">
    <rect x="100" y="1000" width="650" height="350" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="425" y="1030" font-size="18" font-weight="bold" text-anchor="middle">SERVO CONTROL SYSTEM</text>
    
    <!-- 9V Battery -->
    <g transform="translate(150, 1060)">
      <rect x="0" y="0" width="60" height="100" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="30" y="30" font-size="14" font-weight="bold" text-anchor="middle">9V</text>
      <text x="30" y="50" font-size="11" text-anchor="middle">Battery</text>
      <circle cx="30" cy="110" r="4" fill="#000"/>
      <text x="50" y="113" font-size="11">+</text>
      <line x1="30" y1="100" x2="30" y2="110" stroke="#000" stroke-width="2"/>
      <circle cx="30" cy="140" r="4" fill="#000"/>
      <text x="50" y="143" font-size="11">-</text>
      <line x1="30" y1="120" x2="30" y2="140" stroke="#000" stroke-width="2"/>
    </g>
    
    <!-- Buck Converter -->
    <g transform="translate(280, 1090)">
      <rect x="0" y="0" width="150" height="80" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="75" y="25" font-size="14" font-weight="bold" text-anchor="middle">BUCK</text>
      <text x="75" y="45" font-size="13" text-anchor="middle">CONVERTER</text>
      <text x="75" y="65" font-size="11" text-anchor="middle">9V → 5-6V</text>
      
      <circle cx="-10" cy="20" r="4" fill="#000"/>
      <text x="-25" y="23" font-size="10" text-anchor="end">IN+</text>
      <circle cx="-10" cy="50" r="4" fill="#000"/>
      <text x="-25" y="53" font-size="10" text-anchor="end">IN-</text>
      
      <circle cx="160" cy="20" r="4" fill="#000"/>
      <text x="175" y="23" font-size="10">OUT+</text>
      <circle cx="160" cy="50" r="4" fill="#000"/>
      <text x="175" y="53" font-size="10">OUT-</text>
    </g>
    
    <!-- Servo X -->
    <g transform="translate(520, 1070)">
      <rect x="0" y="0" width="90" height="110" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="45" y="25" font-size="14" font-weight="bold" text-anchor="middle">SERVO X</text>
      <text x="45" y="45" font-size="11" text-anchor="middle">(X-AXIS)</text>
      
      <circle cx="-10" cy="30" r="4" fill="#000"/>
      <text x="-30" y="33" font-size="10" text-anchor="end">V+</text>
      <circle cx="-10" cy="60" r="4" fill="#000"/>
      <text x="-30" y="63" font-size="10" text-anchor="end">GND</text>
      <circle cx="-10" cy="90" r="4" fill="#000"/>
      <text x="-30" y="93" font-size="10" text-anchor="end">PWM</text>
    </g>
    
    <!-- Servo Y -->
    <g transform="translate(650, 1070)">
      <rect x="0" y="0" width="90" height="110" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="45" y="25" font-size="14" font-weight="bold" text-anchor="middle">SERVO Y</text>
      <text x="45" y="45" font-size="11" text-anchor="middle">(Y-AXIS)</text>
      
      <circle cx="-10" cy="30" r="4" fill="#000"/>
      <text x="-30" y="33" font-size="10" text-anchor="end">V+</text>
      <circle cx="-10" cy="60" r="4" fill="#000"/>
      <text x="-30" y="63" font-size="10" text-anchor="end">GND</text>
      <circle cx="-10" cy="90" r="4" fill="#000"/>
      <text x="-30" y="93" font-size="10" text-anchor="end">PWM</text>
    </g>
    
    <!-- Battery to Buck -->
    <line x1="180" y1="1170" x2="270" y2="1110" stroke="#000" stroke-width="2"/>
    <line x1="180" y1="1200" x2="270" y2="1140" stroke="#000" stroke-width="2"/>
    
    <!-- Buck to Servos Power -->
    <line x1="440" y1="1110" x2="510" y2="1100" stroke="#000" stroke-width="2"/>
    <line x1="510" y1="1100" x2="640" y2="1100" stroke="#000" stroke-width="2"/>
    
    <!-- Buck to Servos GND -->
    <line x1="440" y1="1140" x2="510" y2="1130" stroke="#000" stroke-width="2"/>
    <line x1="510" y1="1130" x2="640" y2="1130" stroke="#000" stroke-width="2"/>
    
    <!-- Servos to Arduino PWM -->
    <line x1="510" y1="1160" x2="490" y2="680" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <text x="500" y="900" font-size="9" transform="rotate(-70 500 900)">D9→Servo X</text>
    
    <line x1="640" y1="1160" x2="490" y2="720" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <text x="550" y="950" font-size="9" transform="rotate(-65 550 950)">D10→Servo Y</text>
  </g>
  
  <!-- ============= RELAY MODULE ============= -->
  <g id="relay">
    <rect x="800" y="1000" width="350" height="350" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="975" y="1030" font-size="18" font-weight="bold" text-anchor="middle">2-CHANNEL RELAY</text>
    
    <line x1="810" y1="1045" x2="1140" y2="1045" stroke="#000" stroke-width="1"/>
    
    <!-- Control pins LEFT -->
    <circle cx="810" cy="1070" r="4" fill="#000"/>
    <text x="790" y="1073" font-size="11" font-weight="bold" text-anchor="end">VCC</text>
    <line x1="800" y1="1070" x2="810" y2="1070" stroke="#000" stroke-width="2"/>
    
    <circle cx="810" cy="1100" r="4" fill="#000"/>
    <text x="790" y="1103" font-size="11" font-weight="bold" text-anchor="end">GND</text>
    <line x1="800" y1="1100" x2="810" y2="1100" stroke="#000" stroke-width="2"/>
    
    <circle cx="810" cy="1130" r="4" fill="#000"/>
    <text x="790" y="1133" font-size="11" font-weight="bold" text-anchor="end">IN1</text>
    <line x1="800" y1="1130" x2="810" y2="1130" stroke="#000" stroke-width="2"/>
    
    <circle cx="810" cy="1160" r="4" fill="#000"/>
    <text x="790" y="1163" font-size="11" font-weight="bold" text-anchor="end">IN2</text>
    <line x1="800" y1="1160" x2="810" y2="1160" stroke="#000" stroke-width="2"/>
    
    <!-- Relay 1 contacts RIGHT -->
    <text x="840" y="1210" font-size="13" font-weight="bold">RELAY 1:</text>
    <circle cx="1140" cy="1205" r="4" fill="#000"/>
    <text x="1120" y="1208" font-size="11" text-anchor="end">COM1</text>
    <line x1="1140" y1="1205" x2="1150" y2="1205" stroke="#000" stroke-width="2"/>
    
    <circle cx="1140" cy="1235" r="4" fill="#000"/>
    <text x="1120" y="1238" font-size="11" text-anchor="end">NO1</text>
    <line x1="1140" y1="1235" x2="1150" y2="1235" stroke="#000" stroke-width="2"/>
    
    <!-- Relay 2 contacts RIGHT -->
    <text x="840" y="1275" font-size="13" font-weight="bold">RELAY 2:</text>
    <circle cx="1140" cy="1270" r="4" fill="#000"/>
    <text x="1120" y="1273" font-size="11" text-anchor="end">COM2</text>
    <line x1="1140" y1="1270" x2="1150" y2="1270" stroke="#000" stroke-width="2"/>
    
    <circle cx="1140" cy="1300" r="4" fill="#000"/>
    <text x="1120" y="1303" font-size="11" text-anchor="end">NO2</text>
    <line x1="1140" y1="1300" x2="1150" y2="1300" stroke="#000" stroke-width="2"/>
  </g>
  
  <!-- Relay to Arduino connections -->
  <line x1="800" y1="1070" x2="750" y2="1070" stroke="#000" stroke-width="1.5"/>
  <line x1="750" y1="1070" x2="750" y2="950" stroke="#000" stroke-width="1.5"/>
  <line x1="750" y1="950" x2="280" y2="950" stroke="#000" stroke-width="1.5"/>
  <line x1="280" y1="950" x2="280" y2="815" stroke="#000" stroke-width="1.5"/>
  
  <line x1="800" y1="1100" x2="730" y2="1100" stroke="#000" stroke-width="1.5"/>
  <line x1="730" y1="1100" x2="730" y2="970" stroke="#000" stroke-width="1.5"/>
  <line x1="730" y1="970" x2="340" y2="970" stroke="#000" stroke-width="1.5"/>
  <line x1="340" y1="970" x2="340" y2="815" stroke="#000" stroke-width="1.5"/>
  
  <line x1="800" y1="1130" x2="490" y2="600" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
  <text x="640" y="850" font-size="9" transform="rotate(-40 640 850)">D6→Relay IN1</text>
  
  <line x1="800" y1="1160" x2="490" y2="640" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
  <text x="640" y="900" font-size="9" transform="rotate(-38 640 900)">D7→Relay IN2</text>
  
  <!-- ============= CHARGING SYSTEM ============= -->
  <g id="charging-system">
    <rect x="1250" y="1000" width="500" height="350" fill="#fff" stroke="#000" stroke-width="3"/>
    <text x="1500" y="1030" font-size="18" font-weight="bold" text-anchor="middle">BATTERY CHARGING</text>
    
    <!-- Solar Panel -->
    <g transform="translate(1300, 1060)">
      <rect x="0" y="0" width="120" height="80" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="60" y="30" font-size="14" font-weight="bold" text-anchor="middle">SOLAR</text>
      <text x="60" y="50" font-size="13" font-weight="bold" text-anchor="middle">PANEL</text>
      
      <line x1="20" y1="20" x2="30" y2="30" stroke="#000" stroke-width="1.5"/>
      <line x1="40" y1="20" x2="50" y2="30" stroke="#000" stroke-width="1.5"/>
      <line x1="60" y1="20" x2="70" y2="30" stroke="#000" stroke-width="1.5"/>
      <line x1="80" y1="20" x2="90" y2="30" stroke="#000" stroke-width="1.5"/>
      
      <circle cx="60" cy="90" r="4" fill="#000"/>
      <text x="80" y="93" font-size="11">+</text>
      <circle cx="60" cy="120" r="4" fill="#000"/>
      <text x="80" y="123" font-size="11">-</text>
    </g>
    
    <!-- TP4056 -->
    <g transform="translate(1480, 1080)">
      <rect x="0" y="0" width="150" height="100" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="75" y="30" font-size="14" font-weight="bold" text-anchor="middle">TP4056</text>
      <text x="75" y="50" font-size="11" text-anchor="middle">Charger</text>
      
      <circle cx="-10" cy="20" r="4" fill="#000"/>
      <text x="-25" y="23" font-size="10" text-anchor="end">IN+</text>
      <circle cx="-10" cy="50" r="4" fill="#000"/>
      <text x="-25" y="53" font-size="10" text-anchor="end">IN-</text>
      
      <circle cx="160" cy="20" r="4" fill="#000"/>
      <text x="175" y="23" font-size="10">B+</text>
      <circle cx="160" cy="50" r="4" fill="#000"/>
      <text x="175" y="53" font-size="10">B-</text>
    </g>
    
    <!-- Battery 1 -->
    <g transform="translate(1310, 1220)">
      <rect x="0" y="0" width="80" height="110" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="40" y="30" font-size="14" font-weight="bold" text-anchor="middle">BATT 1</text>
      <text x="40" y="50" font-size="11" text-anchor="middle">Li-ion</text>
      <text x="40" y="68" font-size="10" text-anchor="middle">3.7V</text>
      
      <circle cx="40" cy="-10" r="4" fill="#000"/>
      <text x="60" y="-7" font-size="11">+</text>
      <circle cx="40" cy="120" r="4" fill="#000"/>
      <text x="60" y="123" font-size="11">-</text>
    </g>
    
    <!-- Battery 2 -->
    <g transform="translate(1450, 1220)">
      <rect x="0" y="0" width="80" height="110" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="40" y="30" font-size="14" font-weight="bold" text-anchor="middle">BATT 2</text>
      <text x="40" y="50" font-size="11" text-anchor="middle">Li-ion</text>
      <text x="40" y="68" font-size="10" text-anchor="middle">3.7V</text>
      
      <circle cx="40" cy="-10" r="4" fill="#000"/>
      <text x="60" y="-7" font-size="11">+</text>
      <circle cx="40" cy="120" r="4" fill="#000"/>
      <text x="60" y="123" font-size="11">-</text>
    </g>
  </g>
  
  <!-- Solar to INA219 -->
  <line x1="1360" y1="1150" x2="1360" y2="1170" stroke="#000" stroke-width="2"/>
  <line x1="1360" y1="1170" x2="1460" y2="1170" stroke="#000" stroke-width="2"/>
  <line x1="1460" y1="1170" x2="1460" y2="250" stroke="#000" stroke-width="2"/>
  <line x1="1460" y1="250" x2="1450" y2="250" stroke="#000" stroke-width="2"/>
  
  <!-- Solar to TP4056 IN+ -->
  <line x1="1360" y1="1170" x2="1360" y2="1190" stroke="#000" stroke-width="2"/>
  <line x1="1360" y1="1190" x2="1470" y2="1100" stroke="#000" stroke-width="2"/>
  
  <!-- Solar- to TP4056 IN- -->
  <line x1="1360" y1="1180" x2="1360" y2="1200" stroke="#000" stroke-width="2"/>
  <line x1="1360" y1="1200" x2="1470" y2="1130" stroke="#000" stroke-width="2"/>
  
  <!-- Solar- to INA219 VIN- -->
  <line x1="1360" y1="1200" x2="1480" y2="1200" stroke="#000" stroke-width="2"/>
  <line x1="1480" y1="1200" x2="1480" y2="290" stroke="#000" stroke-width="2"/>
  <line x1="1480" y1="290" x2="1450" y2="290" stroke="#000" stroke-width="2"/>
  
  <!-- TP4056 B+ to Batteries -->
  <line x1="1640" y1="1100" x2="1680" y2="1100" stroke="#000" stroke-width="2"/>
  <line x1="1680" y1="1100" x2="1680" y2="1200" stroke="#000" stroke-width="2"/>
  <line x1="1680" y1="1200" x2="1350" y2="1200" stroke="#000" stroke-width="2"/>
  <line x1="1350" y1="1200" x2="1350" y2="1210" stroke="#000" stroke-width="2"/>
  
  <line x1="1680" y1="1200" x2="1490" y2="1200" stroke="#000" stroke-width="2"/>
  <line x1="1490" y1="1200" x2="1490" y2="1210" stroke="#000" stroke-width="2"/>
  
  <!-- TP4056 B- to Relay COM -->
  <line x1="1640" y1="1130" x2="1700" y2="1130" stroke="#000" stroke-width="2"/>
  <line x1="1700" y1="1130" x2="1700" y2="1205" stroke="#000" stroke-width="2"/>
  <line x1="1700" y1="1205" x2="1150" y2="1205" stroke="#000" stroke-width="2"/>
  
  <line x1="1700" y1="1205" x2="1700" y2="1270" stroke="#000" stroke-width="2"/>
  <line x1="1700" y1="1270" x2="1150" y2="1270" stroke="#000" stroke-width="2"/>
  
  <!-- Relay NO to Batteries -->
  <line x1="1150" y1="1235" x2="1200" y2="1235" stroke="#000" stroke-width="2"/>
  <line x1="1200" y1="1235" x2="1200" y2="1340" stroke="#000" stroke-width="2"/>
  <line x1="1200" y1="1340" x2="1350" y2="1340" stroke="#000" stroke-width="2"/>
  
  <line x1="1150" y1="1300" x2="1180" y2="1300" stroke="#000" stroke-width="2"/>
  <line x1="1180" y1="1300" x2="1180" y2="1350" stroke="#000" stroke-width="2"/>
  <line x1="1180" y1="1350" x2="1490" y2="1350" stroke="#000" stroke-width="2"/>
  
  <!-- ============= ESP8266 SYSTEM ============= -->
  <g id="esp-system">
    <rect x="100" y="1430" width="1650" height="900" fill="#fff" stroke="#000" stroke-width="4"/>
    <text x="925" y="1470" font-size="22" font-weight="bold" text-anchor="middle">ESP8266 MODULE WITH MODE SWITCHING</text>
    
    <!-- USB-TTL -->
    <g transform="translate(150, 1520)">
      <rect x="0" y="0" width="200" height="180" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="100" y="30" font-size="16" font-weight="bold" text-anchor="middle">USB-TTL</text>
      <text x="100" y="50" font-size="12" text-anchor="middle">Adapter</text>
      
      <circle cx="210" cy="40" r="5" fill="#000"/>
      <text x="230" y="43" font-size="12" font-weight="bold">5V</text>
      <line x1="200" y1="40" x2="210" y2="40" stroke="#000" stroke-width="2"/>
      
      <circle cx="210" cy="80" r="5" fill="#000"/>
      <text x="230" y="83" font-size="12" font-weight="bold">GND</text>
      <line x1="200" y1="80" x2="210" y2="80" stroke="#000" stroke-width="2"/>
      
      <circle cx="210" cy="120" r="5" fill="#000"/>
      <text x="230" y="123" font-size="12" font-weight="bold">TX</text>
      <line x1="200" y1="120" x2="210" y2="120" stroke="#000" stroke-width="2"/>
      
      <circle cx="210" cy="160" r="5" fill="#000"/>
      <text x="230" y="163" font-size="12" font-weight="bold">RX</text>
      <line x1="200" y1="160" x2="210" y2="160" stroke="#000" stroke-width="2"/>
    </g>
    
    <!-- AMS1117 -->
    <g transform="translate(450, 1540)">
      <rect x="0" y="0" width="180" height="130" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="90" y="30" font-size="16" font-weight="bold" text-anchor="middle">AMS1117</text>
      <text x="90" y="50" font-size="13" text-anchor="middle">3.3V Regulator</text>
      
      <circle cx="-10" cy="35" r="5" fill="#000"/>
      <text x="-30" y="38" font-size="12" text-anchor="end" font-weight="bold">VIN</text>
      
      <circle cx="-10" cy="75" r="5" fill="#000"/>
      <text x="-30" y="78" font-size="12" text-anchor="end" font-weight="bold">GND</text>
      
      <circle cx="190" cy="35" r="5" fill="#000"/>
      <text x="210" y="38" font-size="12" font-weight="bold">3.3V</text>
      <line x1="180" y1="35" x2="190" y2="35" stroke="#000" stroke-width="2"/>
      
      <circle cx="190" cy="75" r="5" fill="#000"/>
      <text x="210" y="78" font-size="12" font-weight="bold">GND</text>
      <line x1="180" y1="75" x2="190" y2="75" stroke="#000" stroke-width="2"/>
    </g>
    
    <!-- USB to AMS1117 -->
    <line x1="360" y1="1560" x2="440" y2="1575" stroke="#000" stroke-width="2"/>
    <line x1="360" y1="1600" x2="440" y2="1615" stroke="#000" stroke-width="2"/>
    
    <!-- Capacitor -->
    <g transform="translate(700, 1560)">
      <line x1="0" y1="0" x2="0" y2="35" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="35" x2="10" y2="35" stroke="#000" stroke-width="3"/>
      <line x1="-10" y1="43" x2="10" y2="43" stroke="#000" stroke-width="3"/>
      <line x1="0" y1="43" x2="0" y2="80" stroke="#000" stroke-width="2"/>
      <text x="25" y="40" font-size="12" font-weight="bold">470-1000µF</text>
      <text x="25" y="57" font-size="10">Between</text>
      <text x="25" y="72" font-size="10">3.3V & GND</text>
    </g>
    
    <!-- ESP8266 -->
    <g transform="translate(850, 1510)">
      <rect x="0" y="0" width="250" height="350" fill="#fff" stroke="#000" stroke-width="3"/>
      <text x="125" y="35" font-size="18" font-weight="bold" text-anchor="middle">ESP8266</text>
      
      <circle cx="-10" cy="70" r="5" fill="#000"/>
      <text x="-30" y="73" font-size="12" text-anchor="end" font-weight="bold">VCC</text>
      
      <circle cx="-10" cy="110" r="5" fill="#000"/>
      <text x="-30" y="113" font-size="12" text-anchor="end" font-weight="bold">GND</text>
      
      <circle cx="-10" cy="150" r="5" fill="#000"/>
      <text x="-30" y="153" font-size="12" text-anchor="end" font-weight="bold">EN</text>
      
      <circle cx="-10" cy="190" r="5" fill="#000"/>
      <text x="-30" y="193" font-size="12" text-anchor="end" font-weight="bold">RST</text>
      
      <circle cx="-10" cy="230" r="5" fill="#000"/>
      <text x="-30" y="233" font-size="12" text-anchor="end" font-weight="bold">GPIO0</text>
      
      <circle cx="-10" cy="270" r="5" fill="#000"/>
      <text x="-30" y="273" font-size="12" text-anchor="end" font-weight="bold">GPIO2</text>
      
      <circle cx="-10" cy="310" r="5" fill="#000"/>
      <text x="-30" y="313" font-size="12" text-anchor="end" font-weight="bold">GPIO15</text>
      
      <circle cx="260" cy="110" r="5" fill="#000"/>
      <text x="280" y="113" font-size="12" font-weight="bold">TX</text>
      <line x1="250" y1="110" x2="260" y2="110" stroke="#000" stroke-width="2"/>
      
      <circle cx="260" cy="150" r="5" fill="#000"/>
      <text x="280" y="153" font-size="12" font-weight="bold">RX</text>
      <line x1="250" y1="150" x2="260" y2="150" stroke="#000" stroke-width="2"/>
    </g>
    
    <!-- AMS to ESP connections -->
    <line x1="640" y1="1575" x2="700" y2="1575" stroke="#000" stroke-width="2"/>
    <line x1="700" y1="1575" x2="700" y2="1560" stroke="#000" stroke-width="2"/>
    <line x1="700" y1="1575" x2="840" y2="1580" stroke="#000" stroke-width="2"/>
    
    <line x1="640" y1="1615" x2="700" y2="1640" stroke="#000" stroke-width="2"/>
    <line x1="700" y1="1640" x2="840" y2="1620" stroke="#000" stroke-width="2"/>
    
    <!-- 3.3V to EN, GPIO2, RST -->
    <line x1="700" y1="1575" x2="700" y2="1660" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <line x1="700" y1="1660" x2="840" y2="1660" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <line x1="700" y1="1660" x2="700" y2="1700" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <line x1="700" y1="1700" x2="840" y2="1700" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <line x1="700" y1="1700" x2="700" y2="1780" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <line x1="700" y1="1780" x2="840" y2="1780" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <!-- GND to GPIO15 -->
    <line x1="700" y1="1640" x2="700" y2="1820" stroke="#000" stroke-width="1.5"/>
    <line x1="700" y1="1820" x2="840" y2="1820" stroke="#000" stroke-width="1.5"/>
    
    <!-- Switch 1 - GPIO0 -->
    <g transform="translate(1200, 1700)">
      <rect x="0" y="0" width="220" height="160" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="110" y="30" font-size="15" font-weight="bold" text-anchor="middle">SWITCH 1</text>
      <text x="110" y="50" font-size="13" text-anchor="middle">GPIO0 Mode</text>
      
      <circle cx="40" cy="80" r="6" fill="#000"/>
      <circle cx="120" cy="65" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <circle cx="120" cy="110" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="46" y1="80" x2="114" y2="68" stroke="#000" stroke-width="3"/>
      
      <text x="140" y="68" font-size="10">3.3V (RUN)</text>
      <text x="140" y="113" font-size="10">GND (FLASH)</text>
      
      <circle cx="-10" cy="80" r="5" fill="#000"/>
      <text x="-30" y="83" font-size="11" text-anchor="end">GPIO0</text>
    </g>
    
    <!-- ESP GPIO0 to Switch 1 -->
    <line x1="840" y1="1740" x2="1190" y2="1780" stroke="#000" stroke-width="2"/>
    
    <!-- Switch 2 - UART Routing -->
    <g transform="translate(1200, 1920)">
      <rect x="0" y="0" width="280" height="240" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="140" y="30" font-size="15" font-weight="bold" text-anchor="middle">SWITCH 2</text>
      <text x="140" y="50" font-size="13" text-anchor="middle">UART Routing</text>
      
      <!-- TX Route -->
      <text x="30" y="80" font-size="12" font-weight="bold">TX:</text>
      <circle cx="50" cy="105" r="6" fill="#000"/>
      <circle cx="130" cy="90" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <circle cx="130" cy="130" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="56" y1="105" x2="124" y2="93" stroke="#000" stroke-width="3"/>
      
      <text x="150" y="93" font-size="9">USB TX</text>
      <text x="150" y="133" font-size="9">Ard D2</text>
      
      <circle cx="-10" cy="105" r="5" fill="#000"/>
      <text x="-30" y="108" font-size="11" text-anchor="end">ESP RX</text>
      
      <!-- RX Route -->
      <text x="30" y="165" font-size="12" font-weight="bold">RX:</text>
      <circle cx="230" cy="190" r="6" fill="#000"/>
      <circle cx="150" cy="175" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <circle cx="150" cy="215" r="6" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="224" y1="190" x2="156" y2="178" stroke="#000" stroke-width="3"/>
      
      <text x="130" y="178" font-size="9" text-anchor="end">USB RX</text>
      <text x="130" y="218" font-size="9" text-anchor="end">Ard D3</text>
      
      <circle cx="290" cy="190" r="5" fill="#000"/>
      <text x="310" y="193" font-size="11">ESP TX</text>
    </g>
    
    <!-- ESP TX to Switch 2 -->
    <line x1="1110" y1="1620" x2="1490" y2="2110" stroke="#000" stroke-width="2"/>
    
    <!-- ESP RX to Switch 2 -->
    <line x1="1110" y1="1660" x2="1190" y2="2025" stroke="#000" stroke-width="2"/>
    
    <!-- USB TX/RX to Switch 2 -->
    <line x1="360" y1="1640" x2="1330" y2="2010" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    <line x1="360" y1="1680" x2="1350" y2="2095" stroke="#000" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <!-- Arduino connections to Switch 2 -->
    <line x1="490" y1="520" x2="1330" y2="2050" stroke="#000" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="900" y="1300" font-size="9" transform="rotate(50 900 1300)">Arduino D2 to Switch</text>
    
    <line x1="490" y1="560" x2="1350" y2="2135" stroke="#000" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="900" y="1350" font-size="9" transform="rotate(52 900 1350)">Arduino D3 to Switch</text>
    
    <!-- Voltage Divider -->
    <g transform="translate(1000, 2000)">
      <rect x="0" y="0" width="160" height="120" fill="#fff" stroke="#000" stroke-width="2"/>
      <text x="80" y="25" font-size="14" font-weight="bold" text-anchor="middle">Voltage Divider</text>
      <text x="80" y="43" font-size="11" text-anchor="middle">Ard TX (5V) → ESP RX (3.3V)</text>
      
      <line x1="80" y1="50" x2="80" y2="58" stroke="#000" stroke-width="2"/>
      <rect x="68" y="58" width="24" height="18" fill="none" stroke="#000" stroke-width="2"/>
      <text x="105" y="70" font-size="9">10kΩ</text>
      <line x1="80" y1="76" x2="80" y2="84" stroke="#000" stroke-width="2"/>
      <circle cx="80" cy="84" r="4" fill="#000"/>
      <text x="100" y="87" font-size="9">→ ESP RX</text>
      <line x1="80" y1="84" x2="80" y2="92" stroke="#000" stroke-width="2"/>
      <rect x="68" y="92" width="24" height="18" fill="none" stroke="#000" stroke-width="2"/>
      <text x="105" y="104" font-size="9">10kΩ</text>
      <line x1="80" y1="110" x2="80" y2="118" stroke="#000" stroke-width="2"/>
      
      <text x="80" y="48" font-size="9" text-anchor="middle">From D2</text>
      <text x="30" y="120" font-size="9">GND</text>
    </g>
    
    <!-- MODE INSTRUCTIONS -->
    <rect x="150" y="2230" width="1550" height="130" fill="#f8f8f8" stroke="#000" stroke-width="3"/>
    <text x="925" y="2265" font-size="20" font-weight="bold" text-anchor="middle">MODE SWITCHING PROCEDURE</text>
    
    <text x="180" y="2295" font-size="14" font-weight="bold">MODE 1 - FLASH ESP:</text>
    <text x="200" y="2315" font-size="12">① Disconnect ALL Arduino connections  ② SW1: GPIO0 → GND  ③ SW2: USB-TTL → ESP UART  ④ Upload code via Arduino IDE</text>
    
    <text x="180" y="2335" font-size="14" font-weight="bold">MODE 2 - ESP STANDALONE RUN:</text>
    <text x="200" y="2355" font-size="12">① SW1: GPIO0 → Float/3.3V  ② Power cycle ESP  ③ Verify ESP runs independently</text>
    
    <text x="900" y="2295" font-size="14" font-weight="bold">MODE 3 - ARDUINO ↔ ESP COMMUNICATION:</text>
    <text x="920" y="2315" font-size="12">① SW1: GPIO0 → Float  ② SW2: Arduino UART → ESP UART</text>
    <text x="920" y="2335" font-size="12">③ Voltage divider MUST be between Arduino TX and ESP RX</text>
  </g>
  
  <!-- POWER BUS INDICATORS -->
  <g id="power-buses">
    <!-- 5V Bus -->
    <text x="50" y="950" font-size="14" font-weight="bold" fill="#000">5V POWER BUS:</text>
    <text x="50" y="970" font-size="11">Arduino 5V → LDRs (4×), INA219, Relay VCC, AMS1117</text>
    
    <!-- GND Bus -->
    <text x="50" y="1000" font-size="14" font-weight="bold" fill="#000">GND (COMMON GROUND):</text>
    <text x="50" y="1020" font-size="11">All components MUST share common ground</text>
    <text x="50" y="1035" font-size="11">Arduino GND, LDRs, INA219, Relay, Servos, ESP, TP4056, Batteries</text>
  </g>
  
  <!-- CONNECTION SUMMARY TABLE -->
  <rect x="50" y="2380" width="850" height="280" fill="#fff" stroke="#000" stroke-width="2"/>
  <text x="475" y="2410" font-size="16" font-weight="bold" text-anchor="middle">ARDUINO PIN CONNECTIONS SUMMARY</text>
  
  <line x1="60" y1="2425" x2="890" y2="2425" stroke="#000" stroke-width="1"/>
  
  <text x="70" y="2445" font-size="11" font-weight="bold">ANALOG INPUTS:</text>
  <text x="90" y="2465" font-size="10">A0 → LDR 1 signal (junction between LDR and 10kΩ)</text>
  <text x="90" y="2480" font-size="10">A1 → LDR 2 signal</text>
  <text x="90" y="2495" font-size="10">A2 → LDR 3 signal</text>
  <text x="90" y="2510" font-size="10">A3 → LDR 4 signal</text>
  <text x="90" y="2525" font-size="10">A4 → INA219 SDA (I2C Data)</text>
  <text x="90" y="2540" font-size="10">A5 → INA219 SCL (I2C Clock)</text>
  
  <text x="70" y="2565" font-size="11" font-weight="bold">DIGITAL OUTPUTS:</text>
  <text x="90" y="2585" font-size="10">D2 → Voltage Divider → ESP RX (via 10kΩ + 10kΩ)</text>
  <text x="90" y="2600" font-size="10">D3 → ESP TX (direct connection, 3.3V safe)</text>
  <text x="90" y="2615" font-size="10">D6 → Relay Module IN1</text>
  <text x="90" y="2630" font-size="10">D7 → Relay Module IN2</text>
  <text x="90" y="2645" font-size="10">D9 → Servo X PWM signal</text>
  <text x="90" y="2660" font-size="10">D10 → Servo Y PWM signal</text>
  
  <!-- POWER CONNECTIONS TABLE -->
  <rect x="950" y="2380" width="800" height="280" fill="#fff" stroke="#000" stroke-width="2"/>
  <text x="1350" y="2410" font-size="16" font-weight="bold" text-anchor="middle">POWER CONNECTIONS</text>
  
  <line x1="960" y1="2425" x2="1740" y2="2425" stroke="#000" stroke-width="1"/>
  
  <text x="970" y="2445" font-size="11" font-weight="bold">SERVO POWER (ISOLATED):</text>
  <text x="990" y="2465" font-size="10">9V Battery (+) → Buck Converter IN+</text>
  <text x="990" y="2480" font-size="10">9V Battery (-) → Buck Converter IN-</text>
  <text x="990" y="2495" font-size="10">Buck OUT+ (5-6V) → Both Servos V+</text>
  <text x="990" y="2510" font-size="10">Buck OUT- (GND) → Both Servos GND → Arduino GND</text>
  
  <text x="970" y="2535" font-size="11" font-weight="bold">BATTERY CHARGING:</text>
  <text x="990" y="2555" font-size="10">Solar Panel (+) → INA219 VIN+ AND TP4056 IN+</text>
  <text x="990" y="2570" font-size="10">Solar Panel (-) → INA219 VIN- AND TP4056 IN-</text>
  <text x="990" y="2585" font-size="10">TP4056 B+ → Battery 1 (+) AND Battery 2 (+)</text>
  <text x="990" y="2600" font-size="10">TP4056 B- → Relay COM1 AND Relay COM2</text>
  <text x="990" y="2615" font-size="10">Relay NO1 → Battery 1 (-)</text>
  <text x="990" y="2630" font-size="10">Relay NO2 → Battery 2 (-)</text>
  <text x="990" y="2645" font-size="10">Arduino controls which battery is active via D6/D7</text>
  
  <!-- CRITICAL NOTES -->
  <rect x="50" y="2680" width="1700" height="100" fill="#000" stroke="#000" stroke-width="3"/>
  <text x="900" y="2710" font-size="18" font-weight="bold" text-anchor="middle" fill="#fff">⚠ CRITICAL SAFETY NOTES ⚠</text>
  <text x="70" y="2735" font-size="13" fill="#fff">1. COMMON GROUND: All GND connections MUST be connected together (Arduino, LDRs, INA219, Relay, Servos, ESP, TP4056, Batteries)</text>
  <text x="70" y="2755" font-size="13" fill="#fff">2. VOLTAGE DIVIDER: Arduino D2 (5V) MUST go through 10kΩ+10kΩ divider before ESP RX (accepts only 3.3V max)</text>
  <text x="70" y="2775" font-size="13" fill="#fff">3. ESP FLASHING: Disconnect ALL Arduino connections during ESP flashing. Reconnect only after successful upload.</text>
</svg>