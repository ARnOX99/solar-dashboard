<svg viewBox="0 0 1100 950" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .power-line { stroke: #ef4444; stroke-width: 3; fill: none; marker-end: url(#arrowRed); }
      .data-line { stroke: #06b6d4; stroke-width: 3; fill: none; marker-end: url(#arrowCyan); }
      .control-line { stroke: #10b981; stroke-width: 3; fill: none; marker-end: url(#arrowGreen); }
      .bidirectional-line { stroke: #a855f7; stroke-width: 3; fill: none; }
      .box-text { fill: white; font-family: Arial, sans-serif; font-weight: bold; text-anchor: middle; }
      .box-subtext { fill: white; font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .legend-text { fill: #333; font-family: Arial, sans-serif; font-size: 14px; }
      .label-text { fill: #666; font-family: Arial, sans-serif; font-size: 11px; }
    </style>
    
    <!-- Arrow markers -->
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ef4444" />
    </marker>
    <marker id="arrowCyan" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#06b6d4" />
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#10b981" />
    </marker>
    
    <!-- Gradients -->
    <linearGradient id="servoGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f87171;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fb923c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="solarGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fb923c;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="550" y="35" font-size="28" font-weight="bold" text-anchor="middle" fill="#333">Solar Tracker System</text>
  
  <!-- Legend -->
  <rect x="50" y="55" width="360" height="50" fill="white" stroke="#ccc" stroke-width="2" rx="5"/>
  <line x1="70" y1="73" x2="110" y2="73" class="power-line" stroke-width="4"/>
  <text x="130" y="78" class="legend-text">Power</text>
  
  <line x1="70" y1="90" x2="110" y2="90" class="control-line" stroke-width="4"/>
  <text x="130" y="95" class="legend-text">Control</text>
  
  <line x1="200" y1="73" x2="240" y2="73" class="data-line" stroke-width="4"/>
  <text x="260" y="78" class="legend-text">Data</text>
  
  <line x1="200" y1="90" x2="240" y2="90" class="bidirectional-line" stroke-width="4"/>
  <text x="260" y="95" class="legend-text">Bidirectional</text>

  <!-- USB TTL Power Supply -->
  <rect x="80" y="130" width="110" height="50" fill="#8b5cf6" rx="8"/>
  <text x="135" y="152" class="box-text" font-size="14">USB TTL</text>
  <text x="135" y="168" class="box-subtext">Power Supply</text>

  <!-- AMS1117 Voltage Regulator -->
  <rect x="80" y="240" width="110" height="50" fill="#ec4899" rx="8"/>
  <text x="135" y="262" class="box-text" font-size="14">AMS1117</text>
  <text x="135" y="278" class="box-subtext">Voltage Regulator</text>

  <!-- ESP WiFi Module -->
  <rect x="270" y="240" width="110" height="50" fill="#06b6d4" rx="8"/>
  <text x="325" y="262" class="box-text" font-size="16">ESP</text>
  <text x="325" y="278" class="box-subtext">WiFi Module</text>

  <!-- BH1750 Light Intensity Sensor -->
  <rect x="480" y="110" width="110" height="60" fill="#10b981" rx="8"/>
  <text x="535" y="132" class="box-text" font-size="14">BH1750</text>
  <text x="535" y="148" class="box-subtext" font-size="11">Light Intensity</text>
  <text x="535" y="161" class="box-subtext" font-size="11">Sensor</text>

  <!-- LDR Light Sensor -->
  <rect x="770" y="130" width="110" height="50" fill="#10b981" rx="8"/>
  <text x="825" y="152" class="box-text" font-size="16">LDR</text>
  <text x="825" y="168" class="box-subtext">Light Sensor</text>

  <!-- 9V Battery Power Source -->
  <rect x="980" y="130" width="110" height="50" fill="#ec4899" rx="8"/>
  <text x="1035" y="148" class="box-text" font-size="14">9V Battery</text>
  <text x="1035" y="164" class="box-subtext">Power Source</text>

  <!-- Buck Converter -->
  <rect x="945" y="240" width="130" height="50" fill="#cbd5e1" rx="8"/>
  <text x="1010" y="258" class="box-text" fill="#475569" font-size="13">Buck Converter</text>
  <text x="1010" y="274" class="box-subtext" fill="#64748b">Voltage Regulator</text>

  <!-- ARDUINO Main Controller -->
  <rect x="555" y="240" width="110" height="50" fill="#0369a1" rx="8"/>
  <text x="610" y="258" class="box-text" font-size="14">ARDUINO</text>
  <text x="610" y="274" class="box-subtext">Main Controller</text>

  <!-- SERVO MOTOR -->
  <rect x="545" y="360" width="140" height="50" fill="url(#servoGradient)" rx="8"/>
  <text x="615" y="389" class="box-text" font-size="15">SERVO MOTOR</text>

  <!-- Solar Panel Energy Source -->
  <rect x="545" y="480" width="140" height="50" fill="url(#solarGradient)" rx="8"/>
  <text x="615" y="502" class="box-text" font-size="14">Solar Panel</text>
  <text x="615" y="518" class="box-subtext">Energy Source</text>

  <!-- INA219 Current Sensor -->
  <rect x="555" y="595" width="110" height="50" fill="#06b6d4" rx="8"/>
  <text x="610" y="617" class="box-text" font-size="14">INA219</text>
  <text x="610" y="633" class="box-subtext">Current Sensor</text>

  <!-- TP4056 Charge Controller -->
  <rect x="555" y="710" width="110" height="50" fill="#6366f1" rx="8"/>
  <text x="610" y="732" class="box-text" font-size="14">TP4056</text>
  <text x="610" y="748" class="box-subtext">Charge Controller</text>

  <!-- RELAY -->
  <rect x="555" y="825" width="110" height="50" fill="#0369a1" rx="8"/>
  <text x="610" y="854" class="box-text" font-size="16">RELAY</text>

  <!-- Battery 1 Storage -->
  <rect x="390" y="825" width="110" height="50" fill="#ec4899" rx="8"/>
  <text x="445" y="847" class="box-text" font-size="14">Battery 1</text>
  <text x="445" y="863" class="box-subtext">Storage</text>

  <!-- Battery 2 Storage -->
  <rect x="720" y="825" width="110" height="50" fill="#ec4899" rx="8"/>
  <text x="775" y="847" class="box-text" font-size="14">Battery 2</text>
  <text x="775" y="863" class="box-subtext">Storage</text>

  <!-- NEW: ThingSpeak -->
  <rect x="270" y="335" width="110" height="45" fill="#7c3aed" rx="8"/>
  <text x="325" y="362" class="box-text" font-size="14">ThingSpeak</text>

  <!-- NEW: Website (Dashboard) -->
  <rect x="270" y="420" width="110" height="45" fill="#db2777" rx="8"/>
  <text x="325" y="439" class="box-text" font-size="13">Website</text>
  <text x="325" y="454" class="box-subtext">(Dashboard)</text>

  <!-- Power connections (ORIGINAL) -->
  <path d="M 135 180 L 135 240" class="power-line"/>
  <text x="145 217" class="label-text">Power</text>
  
  <path d="M 190 265 L 270 265" class="power-line"/>
  
  <path d="M 1035 180 L 1035 240" class="power-line"/>
  <text x="1045 217" class="label-text">Power</text>
  
  <path d="M 945 265 L 915 265 L 915 385 L 685 385" class="power-line"/>
  <text x="890 290" class="label-text">Power</text>
  
  <path d="M 615 530 L 615 595" class="power-line"/>
  <text x="625 568" class="label-text">Power</text>
  
  <path d="M 610 645 L 610 710" class="power-line"/>
  <text x="620 683" class="label-text">Power</text>
  
  <path d="M 610 760 L 610 825" class="power-line"/>
  <text x="620 798" class="label-text">Power</text>
  
  <path d="M 555 850 L 500 850" class="power-line"/>
  <text x="518 843" class="label-text">Power</text>
  
  <path d="M 665 850 L 720 850" class="power-line"/>
  <text x="698 843" class="label-text">Power</text>

  <!-- Data connections (ORIGINAL) -->
  <path d="M 535 170 L 535 200 L 610 200 L 610 240" class="data-line"/>
  <text x="545 193" class="label-text">Data</text>
  
  <path d="M 825 180 L 825 200 L 640 200 L 640 240" class="data-line"/>
  <text x="742 193" class="label-text">Data</text>
  
  <path d="M 555 265 L 460 265" class="data-line"/>
  
  <path d="M 460 265 L 380 265" class="data-line"/>
  <text x="410 258" class="label-text">Data</text>
  

  


  <!-- Control connections (ORIGINAL) -->
  <path d="M 610 290 L 610 360" class="control-line"/>
  <text x="620 328" class="label-text">Control</text>
  
  <!-- NEW: Data from INA219 to Arduino (going through left side) -->
  <path d="M 555 620 L 490 620 L 490 265 L 555 265" class="data-line"/>
  <text x="478 440" class="label-text">Data</text>
  
  <!-- NEW: Data from Relay to Arduino (going through right side) -->
  <path d="M 665 850 L 730 850 L 730 265 L 665 265" class="data-line"/>
  <text x="742 557" class="label-text">Data</text>
  
  <!-- Bidirectional line (Movement) (ORIGINAL) -->
  <line x1="615" y1="410" x2="615" y2="480" class="bidirectional-line"/>
  <text x="640" y="450" font-size="12" fill="#333">Movement</text>

  <!-- NEW: Data from ESP to ThingSpeak -->
  <path d="M 325 290 L 325 335" class="data-line"/>
  
  <!-- NEW: Data from ThingSpeak to Website -->
  <path d="M 325 380 L 325 420" class="data-line"/>

</svg>